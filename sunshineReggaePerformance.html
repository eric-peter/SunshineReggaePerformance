<!DOCTYPE html>

<html lang="de">

<head>

  <meta charset="UTF-8">

  <title>Sunshine Reggae Performance</title>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>

    body { background-color: #111; color: #eee; font-family: sans-serif; }

    canvas { max-width: 90vw; margin: auto; display: block; }

  </style>

</head>

<body>



<h2 style="text-align:center;">Sunshine Reggae Performance</h2>

<canvas id="verbrauchChart"></canvas>



<script>

const csvUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTzOj0jPJ7XqYZacqJG02kUaVfEsSMMi5-4_ps_gC21bXx0rCsfnviw-CCdweTdc50YNdAuZapL6T-z/pub?gid=0&single=true&output=csv" ;



async function fetchData() {

  const response = await fetch(csvUrl);

  const data = await response.text();

  const rows = data.split('\n').slice(1); // Header Ã¼berspringen

  const labels = [];

  const values = [];



  rows.forEach(row => {

    const [datum, verbrauch] = row.split(',');

    if (datum && verbrauch) {

      labels.push(datum.trim());

      values.push(parseFloat(verbrauch));

    }

  });



  return { labels, values };

}



async function renderChart() {

  const { labels, values } = await fetchData();



  new Chart(document.getElementById('verbrauchChart'), {

    type: 'line',

    data: {

      labels: labels,

      datasets: [{

        label: 'Verbrauch in kWh',

        data: values,

        borderColor: '#4CAF50',

        backgroundColor: 'rgba(76, 175, 80, 0.2)',

        tension: 0.3,

        pointBackgroundColor: '#fff',

        pointBorderColor: '#4CAF50'

      }]

    },

    options: {

      responsive: true,

      plugins: {

        legend: { labels: { color: '#eee' } },

        tooltip: {

          callbacks: {

            label: ctx => `${ctx.parsed.y} kWh`

          }

        }

      },

      scales: {

        x: { ticks: { color: '#ccc' } },

        y: { ticks: { color: '#ccc' }, beginAtZero: true }

      }

    }

  });

}



renderChart();

</script>



</body>

</html>

